<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–∏—Ä - –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .game-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 40px;
            padding: 30px;
            max-width: 1000px;
            width: 100%;
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.3);
        }

        h1 {
            text-align: center;
            color: #764ba2;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        /* –í–æ–ø—Ä–æ—Å */
        .question-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 30px;
            border-radius: 30px;
            margin: 20px 0 30px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .question-text {
            color: white;
            font-size: 3em;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .question-label {
            color: rgba(255,255,255,0.8);
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        /* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */
        .stats {
            display: flex;
            justify-content: space-between;
            background: #f0f3ff;
            padding: 20px;
            border-radius: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .stat-item {
            flex: 1;
            min-width: 100px;
            text-align: center;
        }

        .stat-label {
            color: #666;
            font-size: 0.9em;
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #764ba2;
        }

        /* –ü–æ–ª–µ –¥–ª—è —Å—Ç—Ä–µ–ª—å–±—ã */
        .shooting-range {
            position: relative;
            background: #1a1a2e;
            border-radius: 30px;
            padding: 20px;
            min-height: 400px;
            margin: 20px 0;
            border: 3px solid #f093fb;
            overflow: hidden;
        }

        /* –ú–∏—à–µ–Ω–∏ */
        .target {
            position: absolute;
            width: 90px;
            height: 90px;
            background: radial-gradient(circle at 30% 30%, #ff6b6b, #c92a2a);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 2.2em;
            cursor: crosshair;
            box-shadow: 0 0 20px rgba(255, 107, 107, 0.5);
            border: 4px solid white;
            animation: float 2s ease-in-out infinite;
            transition: transform 0.1s;
            z-index: 10;
        }

        .target:hover {
            transform: scale(1.1);
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.8);
        }

        /* –¢–∞–π–º–µ—Ä –Ω–∞–¥ –º–∏—à–µ–Ω—å—é */
        .target-timer {
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 1em;
            font-weight: bold;
            white-space: nowrap;
            border: 2px solid #ff6b6b;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        /* –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ–ø–∞–¥–∞–Ω–∏—è */
        .target.hit {
            animation: hit 0.3s ease-out forwards;
        }

        @keyframes hit {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.5); opacity: 0.5; }
            100% { transform: scale(0); opacity: 0; }
        }

        /* –°–æ–æ–±—â–µ–Ω–∏–µ */
        .feedback {
            text-align: center;
            font-size: 1.5em;
            padding: 15px;
            border-radius: 50px;
            margin: 20px 0;
            font-weight: bold;
            animation: slideIn 0.3s;
        }

        .feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 2px solid #c3e6cb;
        }

        .feedback.wrong {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
        }

        .feedback.timeout {
            background: #fff3cd;
            color: #856404;
            border: 2px solid #ffeeba;
        }

        @keyframes slideIn {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* –ö–Ω–æ–ø–∫–∏ */
        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
            margin: 5px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(102,126,234,0.4);
        }

        .btn-danger {
            background: #f5576c;
            color: white;
        }

        .btn-danger:hover {
            background: #f093fb;
            transform: translateY(-3px);
        }

        .btn-success {
            background: #4caf50;
            color: white;
        }

        .btn-success:hover {
            background: #45a049;
            transform: translateY(-3px);
        }

        .controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .hint {
            text-align: center;
            color: #666;
            margin-top: 10px;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>üî´ –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–∏—Ä ‚è±Ô∏è</h1>

        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div class="stats">
            <div class="stat-item">
                <div class="stat-label">üí• –°—á–µ—Ç</div>
                <div class="stat-value" id="score">0</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">‚úÖ –ü–æ–ø–∞–¥–∞–Ω–∏–π</div>
                <div class="stat-value" id="correct">0</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">‚è±Ô∏è –ü—Ä–æ–ø—É—â–µ–Ω–æ</div>
                <div class="stat-value" id="missed">0</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">üéØ –û—Å—Ç–∞–ª–æ—Å—å</div>
                <div class="stat-value" id="remaining">0</div>
            </div>
        </div>

        <!-- –¢–µ–∫—É—â–∏–π –≤–æ–ø—Ä–æ—Å -->
        <div class="question-box">
            <div class="question-label">–ù–∞–π–¥–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç:</div>
            <div class="question-text" id="question">5 + 3 = ?</div>
        </div>

        <!-- –ü–æ–ª–µ –¥–ª—è —Å—Ç—Ä–µ–ª—å–±—ã -->
        <div class="shooting-range" id="shootingRange" onclick="shoot(event)">
            <!-- –ú–∏—à–µ–Ω–∏ –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å -->
        </div>

        <!-- –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å -->
        <div id="feedback" class="feedback" style="display: none;"></div>

        <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ -->
        <div class="controls">
            <button class="btn btn-success" onclick="startGame()">‚ñ∂ –°—Ç–∞—Ä—Ç</button>
            <button class="btn btn-primary" onclick="nextRound()">üé≤ –°–ª–µ–¥—É—é—â–∏–π —Ä–∞—É–Ω–¥</button>
            <button class="btn btn-danger" onclick="resetGame()">üîÑ –°–±—Ä–æ—Å</button>
        </div>

        <div class="hint">
            ‚è±Ô∏è –ú–∏—à–µ–Ω–∏ –∏—Å—á–µ–∑–∞—é—Ç —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥! –ü–æ–ø–∞–ª –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç - —Å—Ä–∞–∑—É –Ω–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä!
        </div>
    </div>

    <script>
        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
        let score = 0;
        let correct = 0;
        let missed = 0;
        let gameActive = false;
        let currentQuestion = {
            text: '',
            answer: 0
        };
        let targets = [];
        let targetTimeouts = [];

        // –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞
        function generateQuestion() {
            const operations = ['+', '-', '√ó'];
            const op = operations[Math.floor(Math.random() * operations.length)];
            
            let num1, num2, answer, text;
            
            switch(op) {
                case '+':
                    num1 = Math.floor(Math.random() * 20) + 1;
                    num2 = Math.floor(Math.random() * 20) + 1;
                    answer = num1 + num2;
                    text = `${num1} + ${num2} = ?`;
                    break;
                case '-':
                    num1 = Math.floor(Math.random() * 20) + 10;
                    num2 = Math.floor(Math.random() * num1) + 1;
                    answer = num1 - num2;
                    text = `${num1} - ${num2} = ?`;
                    break;
                case '√ó':
                    num1 = Math.floor(Math.random() * 9) + 1;
                    num2 = Math.floor(Math.random() * 9) + 1;
                    answer = num1 * num2;
                    text = `${num1} √ó ${num2} = ?`;
                    break;
            }
            
            return { text, answer };
        }

        // –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö —Ç–∞–π–º–µ—Ä–æ–≤
        function clearAllTimeouts() {
            targetTimeouts.forEach(timeout => clearTimeout(timeout));
            targetTimeouts = [];
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –º–∏—à–µ–Ω–µ–π
        function createTargets() {
            // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ –∏ —Ç–∞–π–º–µ—Ä—ã
            document.querySelectorAll('.target').forEach(t => t.remove());
            clearAllTimeouts();
            
            targets = [];
            
            const range = document.getElementById('shootingRange');
            const rangeWidth = range.offsetWidth;
            const rangeHeight = range.offsetHeight;
            
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å
            currentQuestion = generateQuestion();
            document.getElementById('question').textContent = currentQuestion.text;
            
            // –°–æ–∑–¥–∞–µ–º –º–∞—Å—Å–∏–≤ —Å —á–∏—Å–ª–∞–º–∏ (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç + —Å–ª—É—á–∞–π–Ω—ã–µ)
            const numbers = [currentQuestion.answer];
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–ª—É—á–∞–π–Ω—ã–µ —á–∏—Å–ª–∞
            while (numbers.length < 6) {
                let randomNum;
                if (currentQuestion.answer <= 10) {
                    randomNum = Math.floor(Math.random() * 20) + 1;
                } else {
                    randomNum = Math.floor(Math.random() * 30) + 1;
                }
                
                if (!numbers.includes(randomNum)) {
                    numbers.push(randomNum);
                }
            }
            
            // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º
            numbers.sort(() => Math.random() - 0.5);
            
            // –°–æ–∑–¥–∞–µ–º –º–∏—à–µ–Ω–∏
            numbers.forEach((num) => {
                const target = document.createElement('div');
                target.className = 'target';
                target.textContent = num;
                target.dataset.value = num;
                
                // –°–ª—É—á–∞–π–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è
                const left = 50 + Math.random() * (rangeWidth - 180);
                const top = 50 + Math.random() * (rangeHeight - 180);
                
                target.style.left = left + 'px';
                target.style.top = top + 'px';
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Ç–∞–π–º–µ—Ä –Ω–∞–¥ –º–∏—à–µ–Ω—å—é
                const timer = document.createElement('div');
                timer.className = 'target-timer';
                timer.textContent = '5s';
                target.appendChild(timer);
                
                range.appendChild(target);
                targets.push(target);
                
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä –Ω–∞ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ (5 —Å–µ–∫—É–Ω–¥)
                const timeout = setTimeout(() => {
                    if (target.parentNode) {
                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–∏ —ç—Ç–æ –º–∏—à–µ–Ω—å
                        const isCorrect = (num === currentQuestion.answer);
                        
                        target.classList.add('expire');
                        
                        setTimeout(() => {
                            if (target.parentNode) {
                                target.remove();
                                targets = targets.filter(t => t !== target);
                                
                                // –ï—Å–ª–∏ —ç—Ç–æ –±—ã–ª–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –º–∏—à–µ–Ω—å –∏ –∏–≥—Ä–∞ –∞–∫—Ç–∏–≤–Ω–∞
                                if (isCorrect && gameActive) {
                                    missed++;
                                    score = Math.max(0, score - 5);
                                    showFeedback('‚è±Ô∏è –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –∏—Å—á–µ–∑! -5', 'timeout');
                                    updateStats();
                                    
                                    // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π —Ä–∞—É–Ω–¥, –µ—Å–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –º–∏—à–µ–Ω—å –∏—Å—á–µ–∑–ª–∞
                                    if (gameActive) {
                                        setTimeout(() => {
                                            if (gameActive) {
                                                createTargets();
                                            }
                                        }, 500);
                                    }
                                }
                                
                                document.getElementById('remaining').textContent = targets.length;
                            }
                        }, 500);
                    }
                }, 5000); // 5 —Å–µ–∫—É–Ω–¥
                
                targetTimeouts.push(timeout);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–∞–π–º–µ—Ä –≤–∏–∑—É–∞–ª—å–Ω–æ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
                let timeLeft = 5;
                const timerInterval = setInterval(() => {
                    if (!target.parentNode) {
                        clearInterval(timerInterval);
                        return;
                    }
                    
                    timeLeft--;
                    const timerElement = target.querySelector('.target-timer');
                    if (timerElement) {
                        timerElement.textContent = timeLeft + 's';
                        
                        // –ú–µ–Ω—è–µ–º —Ü–≤–µ—Ç —Ç–∞–π–º–µ—Ä–∞
                        if (timeLeft <= 2) {
                            timerElement.style.background = '#f44336';
                            timerElement.style.borderColor = '#ff0000';
                        } else if (timeLeft <= 3) {
                            timerElement.style.background = '#ff9800';
                            timerElement.style.borderColor = '#ff9800';
                        }
                    }
                    
                    if (timeLeft <= 0) {
                        clearInterval(timerInterval);
                    }
                }, 1000);
            });
            
            document.getElementById('remaining').textContent = targets.length;
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã—Å—Ç—Ä–µ–ª–∞
        function shoot(event) {
            if (!gameActive) {
                showFeedback('‚ö†Ô∏è –ù–∞–∂–º–∏ "–°—Ç–∞—Ä—Ç" —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å!', 'wrong');
                return;
            }
            
            const target = event.target.closest('.target');
            
            if (!target) {
                showFeedback('üí® –ú–∏–º–æ!', 'wrong');
                return;
            }
            
            const value = parseInt(target.dataset.value);
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—Ç–≤–µ—Ç
            if (value === currentQuestion.answer) {
                // –ü–æ–ø–∞–ª –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é
                score += 10;
                correct++;
                
                target.classList.add('hit');
                showFeedback('üéØ –¢–û–ß–ù–û! +10', 'correct');
                
                // –£–¥–∞–ª—è–µ–º –º–∏—à–µ–Ω—å
                setTimeout(() => {
                    if (target.parentNode) {
                        target.remove();
                        targets = targets.filter(t => t !== target);
                        document.getElementById('remaining').textContent = targets.length;
                    }
                }, 300);
                
                updateStats();
                
                // –°–û–ó–î–ê–ï–ú –ù–û–í–´–ô –†–ê–£–ù–î –°–†–ê–ó–£ –ü–û–°–õ–ï –ü–û–ü–ê–î–ê–ù–ò–Ø!
                setTimeout(() => {
                    if (gameActive) {
                        createTargets();
                    }
                }, 400); // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –∞–Ω–∏–º–∞—Ü–∏—é –ø–æ–ø–∞–¥–∞–Ω–∏—è
                
            } else {
                // –ü–æ–ø–∞–ª –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—É—é
                score = Math.max(0, score - 5);
                
                target.classList.add('hit');
                showFeedback('‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ! -5', 'wrong');
                
                setTimeout(() => {
                    if (target.parentNode) {
                        target.remove();
                        targets = targets.filter(t => t !== target);
                        document.getElementById('remaining').textContent = targets.length;
                    }
                }, 300);
                
                updateStats();
            }
        }

        // –ü–æ–∫–∞–∑ —Å–æ–æ–±—â–µ–Ω–∏—è
        function showFeedback(message, type) {
            const feedback = document.getElementById('feedback');
            feedback.textContent = message;
            feedback.className = `feedback ${type}`;
            feedback.style.display = 'block';
            setTimeout(() => feedback.style.display = 'none', 1500);
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        function updateStats() {
            document.getElementById('score').textContent = score;
            document.getElementById('correct').textContent = correct;
            document.getElementById('missed').textContent = missed;
            document.getElementById('remaining').textContent = targets.length;
        }

        // –°–ª–µ–¥—É—é—â–∏–π —Ä–∞—É–Ω–¥ (—Ä—É—á–Ω–æ–π)
        function nextRound() {
            if (!gameActive) return;
            createTargets();
        }

        // –°—Ç–∞—Ä—Ç –∏–≥—Ä—ã
        function startGame() {
            gameActive = true;
            resetGame();
            showFeedback('üî´ –ò–≥—Ä–∞ –Ω–∞—á–∞–ª–∞—Å—å! –£ —Ç–µ–±—è 5 —Å–µ–∫—É–Ω–¥ –Ω–∞ –º–∏—à–µ–Ω—å', 'correct');
        }

        // –°–±—Ä–æ—Å –∏–≥—Ä—ã
        function resetGame() {
            score = 0;
            correct = 0;
            missed = 0;
            updateStats();
            createTargets();
        }

        // –ü–æ–¥—Å–∫–∞–∑–∫–∞ –Ω–∞ –ø–æ–ª–µ
        const range = document.getElementById('shootingRange');
        const hint = document.createElement('div');
        hint.style.cssText = `
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255,255,255,0.7);
            font-size: 1.1em;
            pointer-events: none;
            background: rgba(0,0,0,0.6);
            padding: 8px 20px;
            border-radius: 50px;
            z-index: 100;
            border: 1px solid #f093fb;
        `;
        hint.textContent = 'üëá –°—Ç—Ä–µ–ª—è–π –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç üëá';
        range.appendChild(hint);
    </script>
</body>
</html>